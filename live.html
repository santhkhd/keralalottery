<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Draw - Kerala Lottery</title>
    <link href="output.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --youtube-gradient: linear-gradient(135deg, #ff0000 0%, #cc0000 100%);
            --kaumudy-gradient: linear-gradient(135deg, #ff6b6b 0%, #ffa502 100%);
            --card-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --hover-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        /* Enhanced modern styling */
        .enhanced-card {
            transition: all 0.3s ease;
            border-radius: 16px;
            overflow: hidden;
            border: none;
        }
        .enhanced-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }
        
        /* YouTube section enhancements */
        .youtube-card {
            background: var(--youtube-gradient);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(255, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        .youtube-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 35px rgba(255, 0, 0, 0.4);
        }
        
        /* Kaumudy section enhancements */
        .kaumudy-card {
            background: var(--kaumudy-gradient);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.3);
            transition: all 0.3s ease;
        }
        .kaumudy-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 35px rgba(255, 107, 107, 0.4);
        }
        
        /* Subscribe button enhancements */
        .subscribe-btn {
            transition: all 0.3s ease;
            border-radius: 50px;
            font-weight: 700;
            letter-spacing: 0.5px;
            box-shadow: 0 8px 20px rgba(255, 0, 0, 0.3);
        }
        .subscribe-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 25px rgba(255, 0, 0, 0.4);
        }
        .subscribe-btn:active {
            transform: translateY(-1px);
        }
        
        /* Live stream container enhancements */
        .stream-container {
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        .stream-container:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }
        
        /* Improved text readability */
        .text-white {
            color: #ffffff;
        }
        
        .text-blue-700 {
            color: #1e3a8a;
        }
        
        /* Mobile-specific improvements */
        @media (max-width: 640px) {
            .youtube-card, .kaumudy-card {
                border-radius: 16px;
            }
            
            .subscribe-btn {
                padding: 1rem 1.5rem;
                font-size: 1rem;
            }
            
            .stream-container {
                border-radius: 16px;
            }
        }
        
        /* Animated elements */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        .floating {
            animation: float 3s ease-in-out infinite;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Header with language switcher -->
    <div class="w-full bg-gradient-to-r from-blue-900 to-blue-500 text-white py-5 px-4 flex items-center justify-between shadow-md relative">
        <button class="text-2xl absolute left-4 top-1/2 -translate-y-1/2 bg-transparent border-none text-white hover:bg-blue-800/30 rounded-full p-2 transition" onclick="goBack()" title="Back">‚Üê</button>
        <span id="header-title" class="text-lg font-bold flex-1 text-center">Live Draw</span>
        <button class="text-2xl absolute right-4 top-1/2 -translate-y-1/2 bg-transparent border-none text-white hover:bg-blue-800/30 rounded-full p-2 transition" id="langIconBtn" title="Change language">üåê</button>
        <div class="hidden fixed top-16 right-4 z-50 bg-white rounded-xl shadow-lg p-6 min-w-[180px]" id="langPopup">
            <div class="font-bold text-blue-700 mb-2">Select Language</div>
            <button class="block w-full text-left py-2 rounded hover:bg-blue-50 lang-popup-btn text-gray-800 font-semibold" data-lang="en">English</button>
            <button class="block w-full text-left py-2 rounded hover:bg-blue-50 lang-popup-btn text-gray-800 font-semibold" data-lang="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</button>
            <button class="block w-full text-left py-2 rounded hover:bg-blue-50 lang-popup-btn text-gray-800 font-semibold" data-lang="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</button>
        </div>
    </div>

    <div class="w-full py-8 px-2">
      <div class="max-w-4xl mx-auto">
        <!-- Beautiful YouTube Subscribe Section -->
        <div class="youtube-card enhanced-card p-8 mb-8 relative overflow-hidden">
            <!-- Animated background elements -->
            <div class="absolute top-0 left-0 w-full h-full opacity-10">
                <div class="absolute top-4 left-4 w-20 h-20 bg-white rounded-full animate-pulse"></div>
                <div class="absolute bottom-4 right-4 w-16 h-16 bg-white rounded-full animate-pulse" style="animation-delay: 1s;"></div>
                <div class="absolute top-1/2 left-1/4 w-12 h-12 bg-white rounded-full animate-pulse" style="animation-delay: 2s;"></div>
            </div>
            
            <div class="relative z-10 text-center">
                <!-- YouTube Icon with Animation -->
                <div class="flex justify-center mb-6">
                    <div class="bg-white rounded-full p-4 shadow-lg floating">
                        <span class="text-4xl">üì∫</span>
                    </div>
                </div>
                
                <!-- Main Content -->
                <h2 class="text-3xl font-bold text-white mb-3" id="subscribe-title">Subscribe to Our YouTube Channel</h2>
                <p class="text-red-100 text-lg mb-6" id="subscribe-desc">Get notified about live draws and lottery results!</p>
                
                <!-- Subscribe Button -->
                <a href="https://www.youtube.com/@datafactory1?sub_confirmation=1" 
                   target="_blank" 
                   class="inline-flex items-center gap-3 bg-white text-red-600 font-bold py-4 px-8 rounded-full text-lg shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-110 hover:bg-red-50 subscribe-btn">
                    <span class="text-2xl">üîî</span>
                    <span id="subscribe-btn-text">Subscribe Now</span>
                    <span class="text-xl">‚Üí</span>
                </a>
                
                <!-- Stats -->
                <div class="flex justify-center gap-8 mt-6 text-white">
                    <div class="text-center">
                        <div class="text-2xl font-bold">üé•</div>
                        <div class="text-sm opacity-90">Live Streams</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold">üìä</div>
                        <div class="text-sm opacity-90">Results</div>
                    </div>
                    <div class="text-center">
                        <div class="text-2xl font-bold">‚ö°</div>
                        <div class="text-sm opacity-90">Updates</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Kairali News Big YouTube Live Thumbnail Section -->
        <div class="enhanced-card stream-container mb-8 overflow-hidden">
          <a href="https://www.youtube.com/channel/UCnEvxaWfVL91XIYuyQRO5QA/live" target="_blank" class="block w-full group">
            <div class="relative w-full">
              <img src="https://img.youtube.com/vi/yiiqRHY1Bl8/hqdefault_live.jpg" alt="Kairali News Live Thumbnail" class="w-full h-auto object-cover aspect-video">
              <div class="absolute inset-0 flex items-center justify-center">
                <span class="inline-flex items-center justify-center rounded-full bg-black bg-opacity-60 group-hover:bg-opacity-80 transition p-6 sm:p-8">
                  <svg class="w-16 h-16 sm:w-24 sm:h-24 text-white" fill="currentColor" viewBox="0 0 84 84"><circle cx="42" cy="42" r="42" fill="currentColor" opacity="0.3"/><polygon points="34,26 62,42 34,58" fill="#fff"/></svg>
                </span>
              </div>
            </div>
          </a>
          <div class="w-full text-center py-4 bg-white">
            <span class="text-xl font-bold text-red-700">Kairali News Live</span>
          </div>
        </div>

            <div class="border-t border-gray-200 pt-8">
                <h2 class="text-2xl font-bold text-blue-700 mb-4 text-center" id="kaumudy-title">Kaumudy TV Live Stream</h2>
                <div class="flex justify-center">
                    <div class="w-full max-w-2xl">
                        <iframe 
                            src="https://bradmax.com/client/embed-player/4e1bf55c403a5ce8290565ca431d65524a36f2db_7239?mediaUrl=https%3A%2F%2Foqgdrkxby4rm-hls-live.5centscdn.com%2Fkaumudytv%2Flive.stream%2Fplaylist.m3u8&title=kaumudytv%2Flive&id=30720"
                            class="w-full h-64 md:h-80 rounded-xl shadow-lg"
                            frameborder="0"
                            allowfullscreen>
                        </iframe>
                    </div>
                </div>
            </div>
            
            <div class="mb-16"></div>
        </div>
      </div>


    </div>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 w-full bg-gray-900 flex justify-around items-center py-2 shadow-lg z-40">
        <a class="flex flex-col items-center text-blue-300 hover:text-white transition" href="index.html">
            <span class="material-icons">home</span>
            <span class="text-xs">Home</span>
        </a>
        <a class="flex flex-col items-center text-blue-300 hover:text-white transition" href="prediction.html">
            <span class="material-icons">star</span>
            <span class="text-xs">Lucky</span>
        </a>
        <a class="flex flex-col items-center text-blue-300 hover:text-white transition" href="search.html">
            <span class="material-icons">search</span>
            <span class="text-xs">Search</span>
        </a>
        <a class="flex flex-col items-center text-blue-300 hover:text-white transition" href="scanner.html">
            <span class="material-icons">qr_code_scanner</span>
            <span class="text-xs">Scanner</span>
        </a>
        <a class="flex flex-col items-center text-white font-bold" href="live.html">
            <span class="material-icons">live_tv</span>
            <span class="text-xs">Live</span>
        </a>
    </nav>

    <script>
        // Language support
        let currentLang = localStorage.getItem('lang') || 'en';
        
        const langStrings = {
            en: {
                header: 'Live Draw',
                mainTitle: 'Live Draw',
                youtubeLive: 'YouTube Live',
                kaumudyLive: 'Kaumudy TV Live Stream',
                liveStream: 'Live Stream (m3u8)',
                subscribeTitle: 'Subscribe to Our YouTube Channel',
                subscribeDesc: 'Get notified about live draws and lottery results!',
                subscribeBtn: 'Subscribe Now'
            },
            ml: {
                header: '‡¥≤‡µà‡¥µ‡µç ‡¥°‡µç‡¥∞‡µã',
                mainTitle: '‡¥≤‡µà‡¥µ‡µç ‡¥°‡µç‡¥∞‡µã',
                youtubeLive: '‡¥Ø‡µÇ‡¥ü‡µç‡¥Ø‡µÇ‡¥¨‡µç ‡¥≤‡µà‡¥µ‡µç',
                kaumudyLive: '‡¥ï‡µó‡¥Æ‡µÅ‡¥¶‡¥ø ‡¥ü‡¥ø‡¥µ‡¥ø ‡¥≤‡µà‡¥µ‡µç ‡¥∏‡µç‡¥ü‡µç‡¥∞‡µÄ‡¥Ç',
                liveStream: '‡¥≤‡µà‡¥µ‡µç ‡¥∏‡µç‡¥ü‡µç‡¥∞‡µÄ‡¥Ç (m3u8)',
                subscribeTitle: '‡¥û‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥Ø‡µÇ‡¥ü‡µç‡¥Ø‡µÇ‡¥¨‡µç ‡¥ö‡¥æ‡¥®‡µΩ ‡¥∏‡¥¨‡µç‡¥∏‡µç‡¥ï‡µç‡¥∞‡µà‡¥¨‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï',
                subscribeDesc: '‡¥≤‡µà‡¥µ‡µç ‡¥°‡µç‡¥∞‡µã‡¥ï‡¥≥‡µÅ‡¥Ç ‡¥≤‡µã‡¥ü‡µç‡¥ü‡¥±‡¥ø ‡¥´‡¥≤‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥Ç ‡¥ï‡µÅ‡¥±‡¥ø‡¥ö‡µç‡¥ö‡µç ‡¥Ö‡¥±‡¥ø‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡¥™‡µç‡¥™‡µÜ‡¥ü‡µÅ‡¥ï!',
                subscribeBtn: '‡¥á‡¥™‡µç‡¥™‡µã‡µæ ‡¥∏‡¥¨‡µç‡¥∏‡µç‡¥ï‡µç‡¥∞‡µà‡¥¨‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥ï'
            },
            ta: {
                header: '‡Æ®‡Øá‡Æ∞‡Æ≤‡Øà ‡Æü‡Æø‡Æ∞‡Ææ',
                mainTitle: '‡Æ®‡Øá‡Æ∞‡Æ≤‡Øà ‡Æü‡Æø‡Æ∞‡Ææ',
                youtubeLive: '‡ÆØ‡ØÇ‡Æü‡Æø‡ÆØ‡ØÇ‡Æ™‡Øç ‡Æ®‡Øá‡Æ∞‡Æ≤‡Øà',
                kaumudyLive: '‡Æï‡Øå‡ÆÆ‡ØÅ‡Æ§‡Æø ‡Æü‡Æø‡Æµ‡Æø ‡Æ®‡Øá‡Æ∞‡Æ≤‡Øà ‡Æ∏‡Øç‡Æü‡Øç‡Æ∞‡ØÄ‡ÆÆ‡Øç',
                liveStream: '‡Æ®‡Øá‡Æ∞‡Æ≤‡Øà ‡Æ∏‡Øç‡Æü‡Øç‡Æ∞‡ØÄ‡ÆÆ‡Øç (m3u8)',
                subscribeTitle: '‡Æé‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆØ‡ØÇ‡Æü‡Æø‡ÆØ‡ØÇ‡Æ™‡Øç ‡Æö‡Øá‡Æ©‡Æ≤‡Øà ‡Æö‡Æ®‡Øç‡Æ§‡Ææ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç',
                subscribeDesc: '‡Æ®‡Øá‡Æ∞‡Æ≤‡Øà ‡Æü‡Æø‡Æ∞‡Ææ‡Æï‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ≤‡Ææ‡Æü‡Øç‡Æü‡Æ∞‡Æø ‡ÆÆ‡ØÅ‡Æü‡Æø‡Æµ‡ØÅ‡Æï‡Æ≥‡Øà‡Æ™‡Øç ‡Æ™‡Æ±‡Øç‡Æ±‡Æø ‡ÆÖ‡Æ±‡Æø‡Æµ‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç!',
                subscribeBtn: '‡Æá‡Æ™‡Øç‡Æ™‡Øã‡Æ§‡ØÅ ‡Æö‡Æ®‡Øç‡Æ§‡Ææ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç'
            }
        };

        function setLang(lang) {
            currentLang = lang;
            localStorage.setItem('lang', lang);
            updateLangUI();
        }

        function updateLangUI() {
            const t = langStrings[currentLang];
            document.getElementById('header-title').textContent = t.header;
            document.getElementById('main-title').textContent = t.mainTitle;
            
            // Update subscription section
            const subscribeTitle = document.getElementById('subscribe-title');
            const subscribeDesc = document.getElementById('subscribe-desc');
            const subscribeBtnText = document.getElementById('subscribe-btn-text');
            
            if (subscribeTitle) subscribeTitle.textContent = t.subscribeTitle;
            if (subscribeDesc) subscribeDesc.textContent = t.subscribeDesc;
            if (subscribeBtnText) subscribeBtnText.textContent = t.subscribeBtn;
            
            // Update video section titles
            const videoLabels = document.querySelectorAll('.video-label');
            if (videoLabels.length >= 2) {
                videoLabels[0].textContent = t.youtubeLive;
                videoLabels[1].textContent = t.liveStream;
            }
            
            // Update Kaumudy TV section title
            const kaumudyTitle = document.getElementById('kaumudy-title');
            if (kaumudyTitle) {
                kaumudyTitle.textContent = t.kaumudyLive;
            }
        }

        // Language popup setup
        document.addEventListener('DOMContentLoaded', function() {
            const langIconBtn = document.getElementById('langIconBtn');
            const langPopup = document.getElementById('langPopup');
            const langPopupBtns = langPopup.querySelectorAll('.lang-popup-btn');
            
            langIconBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                langPopup.classList.toggle('hidden');
            });
            
            document.body.addEventListener('click', function(e) {
                if (!langPopup.contains(e.target) && e.target !== langIconBtn) {
                    langPopup.classList.add('hidden');
                }
            });
            
            langPopupBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    setLang(this.getAttribute('data-lang'));
                    langPopup.classList.add('hidden');
                });
            });
            
            setLang(currentLang);
        });

        function goBack() {
            window.history.length > 1 ? window.history.back() : window.location.href = 'index.html';
        }

        // --- Dynamic YouTube Embed Logic ---
        function getYouTubeIdFromParam(param) {
            if (!param) return null;
            // If full YouTube URL
            if (param.includes('youtube.com') || param.includes('youtu.be')) {
                const url = new URL(param, window.location.origin);
                if (url.searchParams.get('v')) return url.searchParams.get('v');
                // youtu.be short link
                const path = url.pathname.split('/');
                if (path.length > 1 && path[1].length === 11) return path[1];
            }
            // If just an ID
            if (param.length === 11) return param; // Video ID
            if (param.startsWith('UC')) return param; // Channel ID
            return null;
        }
        function setYouTubeEmbed() {
            const urlParams = new URLSearchParams(window.location.search);
            const ytParam = urlParams.get('yt');
            let embedUrl = '';
            if (ytParam) {
                const id = getYouTubeIdFromParam(ytParam);
                if (!id) return;
                if (id.startsWith('UC')) {
                    // Channel ID: show live stream
                    embedUrl = `https://www.youtube.com/embed/live_stream?channel=${id}`;
                } else {
                    // Video ID: show specific video
                    embedUrl = `https://www.youtube.com/embed/${id}?autoplay=1`;
                }
            } else {
                // Default channel live stream
                embedUrl = 'https://www.youtube.com/embed/live_stream?channel=UCkCWitaToNG1_lR-Si1oMrg';
            }
            const ytplayer = document.getElementById('ytplayer');
            if (ytplayer) ytplayer.src = embedUrl;
        }
        document.addEventListener('DOMContentLoaded', function() {
            setYouTubeEmbed();
        });

        // m3u8 video setup (replace with your m3u8 link later)
        const video = document.getElementById('hls-video');
        const m3u8Url = '';
        if (Hls.isSupported() && m3u8Url) {
            const hls = new Hls();
            hls.loadSource(m3u8Url);
            hls.attachMedia(video);
        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
            video.src = m3u8Url;
        }


    </script>
</body>
</html>
